<?xml version="1.0"?>
<dc-workflow xmlns:i18n="http://xml.zope.org/namespaces/i18n"
             i18n:domain="plone"
             workflow_id="collective.libreorganizacion.poll_"
             title="Poll Workflow"
             description="Worflow simple con dos estados:
                          - Borrador: los electores pueden editarlo.
                          - Publicado: bloqueado para votaci贸n."
             state_variable="review_state"
             initial_state="draft"
             i18n:attributes="title; description">

 <permission>Access contents information</permission>
 <permission>Modify portal content</permission>
 <permission>View</permission>


 <state state_id="draft" title="Borrador" i18n:attributes="title">
  <description i18n:translate="">
    S贸lo lo pueden ver y editar los electores.
  </description>
  <exit-transition transition_id="publish"/>
  <permission-map name="Access contents information"
                  acquired="False">
   <permission-role>Manager</permission-role>
   <permission-role>Owner</permission-role>
   <permission-role>Editor</permission-role>
   <permission-role>Reader</permission-role>
   <permission-role>Contributor</permission-role>
   <permission-role>Elector</permission-role>
  </permission-map>
  <permission-map name="Modify portal content"
                  acquired="False">
   <permission-role>Manager</permission-role>
   <permission-role>Owner</permission-role>
   <permission-role>Editor</permission-role>
   <permission-role>Elector</permission-role>
  </permission-map>
  <permission-map name="View" acquired="False">
   <permission-role>Manager</permission-role>
   <permission-role>Owner</permission-role>
   <permission-role>Editor</permission-role>
   <permission-role>Reader</permission-role>
   <permission-role>Contributor</permission-role>
   <permission-role>Elector</permission-role>
  </permission-map>
 </state>

 <state state_id="published" title="Publicado" i18n:attributes="title">
  <description i18n:translate="">
    Visible por todo el mundo, ya no se puede editar, bloqueado para votaci贸n.
  </description>
  <permission-map name="Access contents information"
                  acquired="False">
   <permission-role>Anonymous</permission-role>
  </permission-map>
  <permission-map name="Modify portal content"
                  acquired="False">
   <permission-role>Manager</permission-role>
   <permission-role>Editor</permission-role>
  </permission-map>
  <permission-map name="View" acquired="False">
   <permission-role>Anonymous</permission-role>
  </permission-map>
 </state>

 <transition transition_id="publish" new_state="published"
             title="Publicar Reviewer publishes content"
             trigger="USER"
             before_script="" after_script=""
             i18n:attributes="title">
  <description i18n:translate="">
    Publicar
  </description>
  <action url="%(content_url)s/content_status_modify?workflow_action=publish"
          category="workflow"
          i18n:translate="">Publicar la encuesta para comenzar la votaci贸n.</action>
  <guard>
   <guard-permission>Review portal content</guard-permission>
  </guard>
 </transition>

</dc-workflow>
